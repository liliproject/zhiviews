var Bitauto=Bitauto||{};(function(A){DomainManager=A.Bitauto.DomainManager=A.Bitauto.DomainManager||{};DomainManager.setBaseDomain=function(B){if(!B){B=DomainManager.getBaseDomain()}A.document.domain=B};DomainManager.getBaseDomain=function(){var B=A.document.domain.split("."),C=B.length;return B[C-2]+"."+B[C-1]};DomainManager.getQichetongDomain=function(){var D={"qichetong.com":"i","bitauto.com":"i","yiche.com":"i","maichebao.com":"i","taoche.com":"i","leche.com":"i","yichemall.com":"sso","huimaiche.com":"qct","daikuan.com":"sso"},B=DomainManager.getBaseDomain(),C=(B in D)?D[B]:"i";return"http://"+C+"."+B+"/"};DomainManager.createQichetongUrl=function(B){if(B.indexOf("/")==0){B=B.substr(1)}return DomainManager.getQichetongDomain()+B}})(this);var Bitauto=Bitauto||{};Bitauto.ValidMsgs={mobile:{required:"请输入手机号",type:"请输入正确的11位手机号码",regex:"请输入正确的11位手机号码",fail:"请输入正确的11位手机号码",errorMobile:"请输入正确的11位手机号码",errorImgCode:"请输入正确验证码",blacklistLimit:"该手机号在禁发信息的名单中",blackMobile:"该手机号在禁发信息的名单中",frequencyLimit:"校验码获取过于频繁,请稍后再试",frequently:"校验码获取过于频繁,请稍后再试",sendTimeLimit:"今日获取校验码已超限",sendVoiceTimeLimit:"今日获取语音校验码已超限",outnumber:"该手机号今日不能使用",errorTimeLimit:"该手机号今日不能使用",exccedMobileValidateCountLimit:"该手机号今日不能使用",exist:"该手机号已注册，<a href='/AuthenService/login.aspx?returnurl="+$("#hidden_returnUrl").val()+"'>直接登录</a>",noExist:"该手机号未注册，请注册或返回账号登录模式！",existsMobile:"该手机号已经激活，直接登录",noBind:"该手机号未注册，请注册或返回账号登录模式！",noMobile:"该手机号未注册，请注册或返回账号登录模式！",unNormalTime:"语音服务时间为每日8点-22点"},imgCode:{required:"请输入验证码",noCode:"请输入验证码",custom:"请输入验证码",fail:"请输入正确验证码",isWrongCode:"请输入正确验证码",errorimgcode:"请输入正确验证码",imgcodeerror:"请输入正确验证码",errorCode:"请输入正确验证码",errorImgCode:"请输入正确验证码"},mobileCode:{required:"请输入校验码",fail:"请输入正确校验码",errorCode:"请输入正确校验码",errorTimeLimit:"该手机号今日不能使用",exceedValidateErrorCountLimit:"该手机号今日不能使用",noCode:"校验码已过期，请重新获取",expires:"校验码已过期，请重新获取",Express:"校验码已过期，请重新获取",codeExpress:"校验码已过期，请重新获取",expressCode:"校验码已过期，请重新获取",frequencyLimit:"校验码获取过于频繁,请稍后再试",sendTimeLimit:"今日获取校验码已超限",exccedMobileValidateCountLimit:"该手机号今日不能使用",blacklistLimit:"该手机号在禁发信息的名单中",sendVoiceTimeLimit:"今日获取语音校验码已超限",unNormalTime:"语音服务时间为每日8点-22点"},voice:{fail:"请输入正确校验码",unNormalTime:"语音服务时间为每日8点-22点",exist:"",errorTimeLimit:"该手机号今日不能使用",blacklistLimit:"该手机号在禁发信息的名单中",sendVoiceTimeLimit:"今日获取语音校验码已超限",frequencyLimit:"校验码获取过于频繁，请稍后再试"},serverStatuMsgHash:{"0":"请输入手机号","1":"已将校验码发送到您手机,请填写","2":"校验码获取过于频繁,请稍后再试","3":"该手机号在禁发信息的名单中","4":"今日获取校验码已超限","5":"请输入验证码","6":"请输入正确验证码","7":"验证码正确","8":"请输入验证码","9":"请输入正确验证码","10":"该手机号未注册，请注册或返回账号登录模式！","11":"该手机号已经激活，直接登录","12":"请输入正确的11位手机号码","13":"该手机号今日不能使用","14":"今日获取语音校验码已超限","15":"语音服务时间为每日8点-22点"}};(function(C,A){var B=function(E,G,F){var G=G,F=F,D=C.type(G)==="number",J=C.type(F)!=="undefined",H=0,M=C.Deferred(),I,L=function(){if(D){return{currentCount:H,passedMillisecond:E*H}}else{return null}},K=function(){if(J){M.notifyWith(F,[L()])}else{M.notify(L())}},O=function(){if(J){M.resolveWith(F,[L()])}else{M.resolve(L())}},N=function(){if(J){M.rejectWith(F,[L()])}else{M.reject(L())}};this.intervalTime=E||1000;I=setInterval(function(){if(D){H=H+1;if(H===G){O()}}K()},this.intervalTime);this.clear=function(){clearInterval(I);N()};this.promise=M.promise()};A.Bitauto=A.Bitauto||{};A.Bitauto.Interval=B})($,window);
/* http://mths.be/placeholder v2.0.7 by @mathias */
(function(G,F,I){var D="placeholder" in F.createElement("input"),L="placeholder" in F.createElement("textarea"),J=I.fn,H=I.valHooks,E,A;if(D&&L){A=J.placeholder=function(){return this};A.input=A.textarea=true}else{A=J.placeholder=function(){var M=this;M.filter((D?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":C,"blur.placeholder":K}).data("placeholder-enabled",true).trigger("blur.placeholder");return M};A.input=D;A.textarea=L;E={"get":function(N){var M=I(N);return M.data("placeholder-enabled")&&M.hasClass("placeholder")?"":N.value},"set":function(O,N){var M=I(O);if(!M.data("placeholder-enabled")){return O.value=N}if(N==""){O.value=N;if(O!=F.activeElement){K.call(O)}}else{if(M.hasClass("placeholder")){C.call(O,true,N)||(O.value=N)}else{O.value=N}}return M}};D||(H.input=E);L||(H.textarea=E);I(function(){I(F).delegate("form","submit.placeholder",function(){var M=I(".placeholder",this).each(C);setTimeout(function(){M.each(K)},10)})});I(G).bind("beforeunload.placeholder",function(){I(".placeholder").each(function(){this.value=""})})}function B(O){var M={},N=/^jQuery\d+$/;I.each(O.attributes,function(P,Q){if(Q.specified&&!N.test(Q.name)){M[Q.name]=Q.value}});return M}function C(P,Q){var M=this,O=I(M);if(M.value==O.attr("placeholder")&&O.hasClass("placeholder")){if(O.data("placeholder-password")){O=O.hide().data("brother").show();if(P===true){return O[0].value=Q}O.focus()}else{M.value="";O.removeClass("placeholder");try{M==F.activeElement&&M.select()}catch(N){}}}}function K(){var M,P=this,O=I(P),R=O,Q=this.id;if(P.value==""){if(P.type=="password"){if(!O.data("placeholder-textinput")){try{M=O.clone().attr({"type":"text"})}catch(N){M=I("<input>").attr(I.extend(B(this),{"type":"text"}))}M.removeAttr("name").removeAttr("id").data({"placeholder-password":true,"placeholder-id":Q,"brother":O}).bind("focus.placeholder",C);O.data({"placeholder-textinput":M,"placeholder-id":Q,"brother":M}).before(M)}O=O.hide().data("brother").show()}O.addClass("placeholder");O[0].value=O.attr("placeholder")}else{O.removeClass("placeholder")}}}(this,document,jQuery));$(document).ready(function(){$("*[placeholder]").each(function(){$(this).placeholder()})});(function(C,A){var B=function(D){this.init(D)};B.prototype=C.extend(B.prototype,{init:function(D){this.option=C.extend(B.defaultOption,D);this.asideElement=this.option.asideElement?this.option.asideElement:this.createAsideElm(this.option);this.set(this.option.msg);this.option.opsition.call(this,this.asideElement);D.visable?(this.asideElement.show()):(this.asideElement.hide());this.option.forElement.data(B.DataKey,this)},createAsideElm:function(D){return C(D.tag,D.attributes)},set:function(E,D){if(E){D=D||this.option.wrap;if(D){E=C(D).html(E)}this.asideElement.empty().append(E)}return this},get:function(){return this.asideElement.html()},show:function(){this.asideElement.show();return this},hide:function(){this.asideElement.hide();return this},addForElement:function(D){if(!C.inArrary(D,this.option.forElement)){D.data(B.DataKey,this);this.option.push(D)}}});B.DataKey="aside-v2";B.defaultOption={tag:"<div></div>",attributes:null,msg:null,wrap:null,asideElement:null,forElement:null,visable:false,opsition:function(D){if(this.option.forElement&&this.option.forElement.length>0){this.option.forElement.first().after(D)}}};A.Aside=B;C.fn.extend({aside:function(D){var E;if(this.length>0){E=this.first().data(B.DataKey);if(!E){E=new B(C.extend({},B.defaultOption,D,{forElement:this.first()}))}if(this.length>1){this.each(function(G,F){if(G>0){E.addForElement(F)}})}}return E}})})($,window);jQuery.fn.serializeObject=function(){var A={};var B=this.serializeArray();jQuery.each(B,function(){if(A[this.name]){if(!A[this.name].push){A[this.name]=[A[this.name]]}A[this.name].push(this.value||"")}else{A[this.name]=this.value||""}});return A};jQuery.fn.getValue=function(){if(this.length===1){return this.val()}else{var A=jQuery.grep(this,function(C){return C.checked||C.selected});var B=[];jQuery(A).each(function(){B.push($(this).val())});return B.join()}};var Validator=function(A){if(!(this instanceof Validator)){return new Validator(A)}A=A||{};var C=this,B=false;this.isDisable=false;this.items=jQuery([]);this.url=A.url;this.parameters=jQuery.isFunction(A.parameters)?A.parameters:function(){return A.parameters};this.form=jQuery(A.form);this.button=jQuery(A.button);this.eventName=A.eventName===null?null:(A.eventName||"blur");this.result={status:true};this.msgs=jQuery.extend({regex:"正则不匹配",required:"请输入必填项",type:"不符合类型",minLength:"您的输入未超过最小长度",maxLength:"您的输入已超过最大长度",custom:"不符合自定义验证"},A.msgs||{});this.onStart=A.onStart;this.onEnd=A.onEnd;this.onSuccess=A.onSuccess;this.onFail=A.onFail;this.onError=function(){E(false);if($.isFunction(A.onError)){A.onError.apply(this,this)}}||function(){E(false);alert("服务器响应异常")};this.onItemStart=A.onItemStart||function(G){var F=G.elements.last().next("aside");if(F){F.remove()}};this.onItemEnd=A.onItemEnd;this.onItemSuccess=A.onItemSuccess||function(F){var G=jQuery("<aside>",{style:"color:green;",text:"√ "+F.getMsg()});G.insertAfter(F.elements.last())};this.onItemFail=A.onItemFail||function(F){var G=jQuery("<aside>",{style:"color:red;",text:"× "+F.getMsg()});G.insertAfter(F.elements.last())};this.isContinueSubmitAfterSuccess=("isContinueSubmitAfterSuccess" in A)?A.isContinueSubmitAfterSuccess:true;this.serverValidate=function(){if(!C.isDisable){if(C.onStart){C.onStart.call(C,C)}var G=$.extend({},C.form?C.form.serializeObject(true):null,C.parameters());var H,F;C.items.each(function(){if(!this.isDisable){G=jQuery.extend(G,this.parameters());G[this.name]=this.getValue()}else{G[this.name]=null}});G["Gamut"]=true;H=(function(I,J){return function(){if($.isFunction(I)){I.apply(this,arguments)}J()}})(C.onEnd,function(){E(false)});F=C.onFail;D(G,H,F,C.onSuccess)}};this.clientValidate=function(){if(!C.isDisable){C.items.each(function(){this.clientValidate()})}};this.validate=function(){if(!C.isDisable&&!B){E(true);C.result={status:true};C.clientValidate();if(C.result.status){C.serverValidate()}else{if(C.onFail){C.onFail.call(C,C)}E(false)}}};function E(F){B=F}var D=function(H,J,F,G){var I=C.url;jQuery.ajax({url:I,type:"POST",data:H,cache:false,dataType:"json",success:function(N){if(N){if("items" in N){C.result=N}var M=N.items||N;if(M){C.items.each(function(){this.result={}});var K;for(var L in M){C.items.each(function(){K=this;if(K.name===L){K.result=M[L];return false}})}}C.processResult(F,G)}else{if(C.onError){C.onError.call(C,C)}}},error:function(){if(C.onError){C.onError.call(C,C)}},complete:function(){if(J){J.call(C,C)}}})};this.processResult=function(F,G){C.items.each(function(H){H=this;H.processResult(H.onFail,H.onSuccess)});if(C.result.status==false){if(F){F.call(C,C)}}else{if(G){G.call(C,C)}}};this.Item=function(G){if(!(this instanceof C.Item)){return new C.Item(G)}C.items.push(this);this.validator=C;var F=this;this.isDisable=("isDisable" in G)?G.isDisable:false;this.withValidatorPrams=!!G.withValidatorPrams||false;this.elements=jQuery(G.elements);this.name=G.name||this.elements.attr("name")||this.elements.attr("id");this.value=G.value;this.parameters=jQuery.isFunction(G.parameters)?G.parameters:function(){return G.parameters};this.eventName=G.eventName===null?null:(G.eventName||C.eventName);this.result={status:true};this.rules=G.rules;this.msgs=jQuery.extend({},C.msgs,G.msgs||{});this.onStart=G.onStart||C.onItemStart;this.onEnd=G.onEnd||C.onItemEnd;this.onSuccess=G.onSuccess||C.onItemSuccess;this.onFail=G.onFail||C.onItemFail;this.validate=function(){if(!F.isDisable&&!C.isDisable){F.clientValidate();if(F.result.status){if(C.url){F.serverValidate()}}if(F.onEnd){F.onEnd.call(F,F)}}};this.serverValidate=function(){if(!F.isDisable&&!C.isDisable){var H=jQuery.extend({},C.parameters(),F.parameters());H[F.name]=F.getValue();D(H)}};this.clientValidate=function(){if(!F.isDisable&&!C.isDisable){F.initResult();if(F.onStart){F.onStart.call(F,F)}if(F.rules){var I=F.getValue();if(F.result.status&&F.rules.required&&I===""){F.setResult(false,"","required")}if(F.result.status&&F.rules.type&&I!==""){var H;switch(F.rules.type){case"email":H=/^[_a-z\d\-\./]+@[_a-z\d\-]+(\.[_a-z\d\-]+)*(\.(info|biz|com|edu|gov|net|am|bz|cn|cx|hk|jp|tw|vc|vn))$/ig;break;case"int":H=/^\d+$/ig;break;case"float":H=/^\d+\.?\d*$/ig;break;case"chinese":H=/^[\u4e00-\u9fa5]+$/ig;break;case"english":H=/^[a-zA-Z\-\s]+$/ig;break;case"url":H=/^(file|gopher|news|nntp|telnet|http|ftp|https|ftps|sftp):\/\/[^\s]*$/ig;break;case"mobile":H=/^1\d{10}$/ig;break;case"tel":H=/^((\d{3}-)?\d{8})|((\d{4}-)?\d{7})$/ig;break;case"phone":H=/^((1\d{10})|(((\d{3}-)?\d{8})|((\d{4}-)?\d{7})))$/ig;break;case"qq":H=/^(([1-9][0-9]{4,})|(\w+@(\w+.)+[a-z0-9_\-]+))$/ig;break;case"zip":H=/^[0-9]\d{5}(?!\d)$/ig;break;case"idcard":H=/^(\d{17}|\d{14})(\d|x)$/ig;break;case"ip":H=/^((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))$/ig;break;case"date":H=/^(?=\d)(?:(?!(?:1582(?:\.|-|\/)10(?:\.|-|\/)(?:0?[5-9]|1[0-4]))|(?:1752(?:\.|-|\/)0?9(?:\.|-|\/)(?:0?[3-9]|1[0-3])))(?=(?:(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:\d\d)(?:[02468][048]|[13579][26]))\D0?2\D29)|(?:\d{4}\D(?!(?:0?[2469]|11)\D31)(?!0?2(?:\.|-|\/)(?:29|30))))(\d{4})([-\/.])(0?\d|1[012])\2((?!00)[012]?\d|3[01])(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/ig;break}if(H&&H.test&&!F.regexTest(H,I)){F.setResult(false,"","type")}}if(F.result.status&&F.rules.regex&&F.rules.regex.test&&I!==""){if(!F.regexTest(F.rules.regex,I)){F.setResult(false,"","regex")}}if(F.result.status&&F.rules.custom){if($.isPlainObject(F.rules.custom)){$.each(F.rules.custom,function(J){if(!F.rules.custom[J].call(F,F)){F.setResult(false,"",J)}})}else{if(!F.rules.custom.call(F,F)){F.setResult(false,"","custom")}}}if(F.result.status&&F.rules.minLength){if(I.length<F.rules.minLength){F.setResult(false,"","minLength")}}if(F.result.status&&F.rules.maxLength){if(I.length>F.rules.maxLength){F.setResult(false,"","maxLength")}}F.processResult(F.onFail)}}};this.regexTest=function(H,I){H.lastIndex=0;return H.test(I)};this.setResult=function(I,J,H){F.result.status=I;F.result.msg=J;F.result.key=H;C.result.status&=I};this.initResult=function(){F.setResult(true,"","")};this.processResult=function(H,I){if(F.result.status==true&&I){I.call(F,F)}else{if(F.result.status==false&&H){C.result.status=false;H.call(F,F)}}};this.getValue=function(){var H;if(F.value){H=F.value.call?F.value.call(F,F):F.value}else{H=this.elements.getValue()}return H};this.isFunc=function(H){return typeof(H)==="function"};this.getMsg=function(J){var I,H;if(!!J){I=F.msgs[J],H=F.isFunc(I)?I.call(F,F):I;return H||""}if(F.result.key&&F.msgs&&F.msgs[F.result.key]){I=F.msgs[F.result.key];H=F.isFunc(I)?I.call(F,F):I;F.result.msg=H}return F.result.msg||""};if(this.eventName){this.elements.on(F.eventName,F.validate)}if(F.rules&&F.rules.maxLength){this.elements.attr("maxlength",F.rules.maxLength);this.elements.bind("keydown keyup onchange propertychange",function(I){I=I||window.event;var J=I.keyCode||I.which;var H=[8,46,35,36,37,38,39,40];var K=F.rules.maxLength-F.getValue().length;if(jQuery.inArray(J,H)<0&&K<=0){if(document.all){I.returnValue=false}else{I.preventDefault()}}if(F.rules.onMaxLengthChange){F.rules.onMaxLengthChange.call(this,K,F.rules.maxLength)}})}};if(C.button){C.button.on("click",function(){C.validate()})}};Validator.prototype.removeItem=function(A){this.items=$($.grep(this.items,function(B){if(B.name===A){B.elements.unbind(B.eventName,B.validate);return true}return false},true));return this};Validator.prototype.clearItems=function(){this.items=jQuery([])};Validator.prototype.getItem=function(B){var A=null;this.items.each(function(D,C){if(C.name===B){A=C;return false}});return A};Validator.prototype.getItems=function(A){var B=jQuery([]);A=A;this.items.each(function(D,C){if(jQuery.inArray(C.name,A)>-1){B.push(C)}});return B};Validator.prototype.createItems=function(B){var A=this;$.each(B,function(){new A.Item(this)})};Validator.prototype.disableItem=function(A){A=[].concat(A);this.items.each(function(C,B){if(jQuery.inArray(B.name,A)>-1){B.isDisable=true}})};Validator.prototype.enableItem=function(A){A=[].concat(A);this.items.each(function(C,B){if(jQuery.inArray(B.name,A)>-1){B.isDisable=false}})};Validator.prototype.setEnableState=function(A){this.isDisable=!A};Validator.type={"email":"email","int":"int","float":"float","chinese":"chinese","english":"english","url":"url","mobile":"mobile","tel":"tel","phone":"phone","qq":"qq","zip":"zip","idcard":"idcard","ip":"ip","date":"date"};var Bitauto=Bitauto||{};(function(D,B){var C=function(){var E=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(E()+E()+"-"+E()+"-"+E()+"-"+E()+"-"+E()+E()+E())};var A=function(E){if(!(this instanceof A)){return new A(E)}var F=this,G=null;this.option=B.extend({imgSelector:"#imgCode",url:"/authenservice/common/CheckCode.aspx?guid=",delegateChangeOption:[{eventName:"click",selector:'[act="ChangeImgCode"]'}]},E);this.img=B(this.option.imgSelector);this.guid=null;this.imgUrl=null;this.getGuid=function(){return G};this.changeGuid=function(){G=C()};this.img.on("load error",function(){B(this).data("isLoading",false)});B.each(this.option.delegateChangeOption,function(I,H){B(document).on(H.eventName,H.selector,B.proxy(F.changeImg,F))})};A.prototype.changeImg=function(){if(!this.img.data("isLoading")){this.img.data("isLoading",true);this.changeGuid();this.img.attr("src",this.getImgUrl())}return false};A.prototype.getImgUrl=function(){var E=this.getGuid();return this.option.url+E};D.ImgCoder=A})(Bitauto,$);var Bitauto=Bitauto||{};(function(C){var A=function(D){var E=this;var H=D.invoker;var G={GetEvents:function(){E.option.smsType=H.option.smsType=1;var I=E.option.elements.btnGetMobileCode[E.option.smsType];return{onStart:function(J){},onSuccess:function(K){var M=E.option.invoker,L=60,J=new C.Interval(1000,L,this);E.option.eventCallback.voiceSuccess.call(M,K);J.promise.always(function(){I.one("click",function(){$.extend(K,G.GetEvents());K.validate()})})},onFail:function(J){I.one("click",function(){$.extend(J,G.GetEvents());J.validate()})},onError:function(J){I.one("click",function(){$.extend(J,G.GetEvents());J.validate()})},onEnd:function(J){}}}};var F={GetEvents:function(){E.option.smsType=H.option.smsType=0;var I=E.option.elements.btnGetMobileCode[E.option.smsType];return{onStart:function(J){I.val(D.textConfig.start).addClass(D.cssConfig.BtnDisableClassName)},onSuccess:function(K){var M=E.option.invoker,L=60,J=new C.Interval(1000,L,this);E.option.eventCallback.textSuccess.call(M,K);J.promise.always(function(){I.one("click",function(){$.extend(K,F.GetEvents());K.validate()})})},onFail:function(J){I.one("click",function(){$.extend(J,F.GetEvents());J.validate()});I.val(D.textConfig.complete).removeClass(D.cssConfig.btnDisabled)},onError:function(J){I.one("click",function(){$.extend(J,F.GetEvents());J.validate()});I.val(D.textConfig.complete).removeClass(D.cssConfig.btnDisabled)},onEnd:function(J){}}}};this.option={};$.extend(this.option,D);this.GetEvents=function(){switch(this.option.smsType){case 0:return F.GetEvents();case 1:return G.GetEvents()}}};var B=function(U){if(!(this instanceof B)){return new B(U)}var E=this,J,O;var S={inputBorderRed:"input_border_red",btnDisabled:"button_jym_hui",};var H={start:"正在获取校验码",process:"秒后重新获取",complete:"重新获取校验码"};var T={txtMobile:$("#txt_mobile"),txtImgCode:$("#txt_imgCode"),txtMobileCode:$("#txt_mobileCode"),btnGetMobileCode:{"0":$("#btn_getMobileCode"),"1":$("#btn_getVoiceMobileCode")},};var K={textSuccess:function(X){var W=D.elements.btnGetMobileCode[D.smsType];var Y=60,V=new C.Interval(1000,Y,this);D.elements.txtMobile.removeClass(D.cssConfig.inputBorderRed);D.elements.txtImgCode.removeClass(D.cssConfig.inputBorderRed);W.val(Y+D.textConfig.process).addClass(D.cssConfig.btnDisabled);V.promise.progress(function(Z){W.val((Y-Z.passedMillisecond/1000)+D.textConfig.process)}).always(function(){W.val(D.textConfig.complete).removeClass(D.cssConfig.btnDisabled)});D.elements.txtMobileCode.aside().hide()},voiceSuccess:function(W){$("#tishi_voice").show();$("#tishi_sendvoice").hide();var X=60,V=new C.Interval(1000,X,this);V.promise.progress(function(Y){$("#tishi_voice_jishi").text((X-Y.passedMillisecond/1000)+"s后才能再次获取哦！")}).always(function(){$("#tishi_voice_jishi").text("60s后才能再次获取哦！");$("#tishi_voice").hide();$("#tishi_sendvoice").show()});D.elements.txtMobileCode.aside().hide()}};var R={tag:"<div></div>",attributes:{"class":"prompt"},opsition:function(){this.option.forElement.parent().append(this.asideElement)}};var N={imgSelector:$("#codeImg"),delegateChangeOption:[{eventName:"click",selector:'[act="ChangeImgCode"]'}]};var L={url:"/ajax/authenservice/MobileCode.ashx",eventName:"blur",parameters:{"mobileCodeKey":"register","smsType":function(){return E.option.smsType}},onItemFail:function(W){W.elements.addClass(D.cssConfig.inputBorderRed);var V=W.elements.aside();V.set('<em class="wrong">'+W.getMsg()+"</em>");V.show()},onItemSuccess:function(W){W.elements.removeClass(D.cssConfig.inputBorderRed);var V=W.elements.aside();V.set('<em class="correct">'+W.getMsg()+"</em>");V.show()}};var P={mobile:{name:"mobile",elements:$("#txt_mobile"),rules:{required:true,type:"mobile"},msgs:C.ValidMsgs.mobile},imgCode:{name:"imageCode",elements:$("#txt_imgCode"),rules:{required:true},parameters:function(){return{"imgCodeGuid":J.getGuid()}},msgs:C.ValidMsgs.imgCode,onFail:function(V){if(V.result.key!="required"){J.changeImg()}V.validator.onItemFail.call(V,V)}}};var D={cssConfig:S,textConfig:H,elements:T,eventCallback:K,asideOption:R,validatorOption:L,validatorItemOption:P,imgCoderOption:N,imgCoder:undefined,invoker:E,smsType:0};E.option=D;if(U){$.extend(true,D,U)}var M=function(V){$.each(V,function(W,X){$.extend(D.asideOption,{forElement:X});new Aside(D.asideOption)})};var F=function(){J=D.imgCoder||new C.ImgCoder(D.imgCoderOption);J.changeImg()};var Q=function(){_validator=new Validator(D.validatorOption);var V=new A(D);$.each(D.elements.btnGetMobileCode,function(W,X){if(X.length>0){(function(Y){X.one("click",function(){V.option.smsType=E.option.smsType=parseInt(Y);$.extend(_validator,V.GetEvents());_validator.validate()})})(W)}})};var I=function(){$.each(D.validatorItemOption,function(){_validator.Item(this)})};var G=function(){M([D.elements.txtMobile,D.elements.txtImgCode]);F();Q();I()};G()};C.MobileCodeCreator=B})(Bitauto);(function(B){var C=B.Bitauto=B.Bitauto||{},A={$:function(D){return document.getElementById(D)},isFunction:function(D){return typeof D==="function"||false},each:function(G,D){var E,F=G.length;for(E=0;E<F;E++){if(D(G[E],E)===false){break}}},objIterator:function(E,D){var F;for(F in E){if(E.hasOwnProperty(F)){if(D(E[F])===null){break}}}},on:(function(){if(window.attachEvent){return function(D,F,E){D.attachEvent("on"+F,E)}}else{return function(D,F,E){F=F.replace(/^on/,"");D.addEventListener(F,E,false)}}})(),off:(function(){if(window.attachEvent){return function(D,F,E){D.detacheEvent(F,E)}}else{return function(D,F,E){F=F.replace(/^on/,"");D.removeEventListener("on"+F,E,true)}}})(),mouseEnterLeave:function(F,D,G,H){var I=D==="mouseenter",E=I?"fromElement":"toElement",J=function(L){L=L||window.event;var M=L.target||L.srcElement,K=L.relatedTarget||L[E];if((F===M||A.contains(F,M))&&!A.contains(F,K)){if(H){G.call(H,L)}else{G(L)}}};D=I?"mouseover":"mouseout";A.on(F,D,J);return J},contains:function(E,D){return E.contains?E.contains(D):!!(E.compareDocumentPosition(D)&16)},delegate:function(D,E){return function(G){G=G||window.event;var F=G.target||G.srcElement;do{if(!D(F,G)){continue}G.delegateTarget=F;E.call(this,G);return}while((F=F.parentNode))}},delegateArr:function(D){return function(G){G=G||window.event;var E=G.target||G.srcElement;do{G.delegateTarget=E;var F,H=D.length,I;for(F=0;F<H;F++){I=D[F];if(I[0](E)){I[1].call(this,G)}}}while((E=E.parentNode))}},extend:function(G,E,D){for(var F in E){if((F in G)&&D){G[F]=E[F]}else{G[F]=E[F]}}},callScript:function(E,D){var F=document.getElementsByTagName("head")[0],G=document.createElement("script");G.setAttribute("type","text/javascript");G.setAttribute("src",E);G.onload=G.onreadystatechange=function(){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){D&&D();G.onload=G.onreadystatechange=null;G.parentNode.removeChild(G)}};F.appendChild(G)},forEach:function(H,E){var D,G,F;for(D=0,G=H.length;D<G,F=H[D];D++){if(E(F,D)===false){break}}},CallBacks:(function(){var D=function(H){var G={},F,I;H=H.split(/\s+/);for(F=0,I=H.length;F<I;F++){if(H[F].match(/(memory)|(once)/ig)){G[H[F].toLowerCase()]=true}}return G},E=function(){var H=[],O=[],F,L,K,J,I,N,G=function(Q){F=Q;N=J||0;J=0;I=H.length;K=true;for(;H&&N<I;N++){var P=H[N];if(!L||P.flagsOption.memory){P.handler(Q);if(P.flagsOption.once){M.remove(P.handler)}}}K=false;L=true;if(H){if(O){if(O.length){G(O.shift())}}}},M={add:function(Q,R){if(H){var S=H.length,P=D(Q),R=R instanceof Array?R:[R];A.forEach(R,function(T){H.push({flagsOption:P,handler:T})});if(K){I=H.length}else{if(L){J=S;G(F)}}}return this},remove:function(P){A.forEach(H,function(Q,R){if(Q.handler==P){if(K){if(R<=I){I--;if(R<=N){N--}}}H.splice(R,1);return false}})},fire:function(P){if(H&&(!L||O)){if(K){O.push(P)}else{G(P)}}},clearFireState:function(){L=false}};return M};return E})(),Cookie:{getCookie:function(E){var D=";?s*"+E+"=([^;]+)",G=new RegExp(D,"ig"),F=document.cookie.match(G);if(F){return decodeURIComponent(F[0].split("=")[1])}return null},setCookie:function(E,G,J,I,H){var F=E+"="+encodeURIComponent(G);if(typeof(J)!=="undefined"){var K=new Date();var D=J*3600*1000;K.setTime(K.getTime()+D);F+="; expires="+K.toGMTString()}(!I&&(I="/"));(!H&&(H=document.domain));F+=";path="+I+";domain="+H;document.cookie=F},removeCookie:function(D){var E=new Date();E.setTime(E.getTime()-10000);document.cookie=D+"=a; expires="+E.toGMTString()}}};if(!Function.prototype.bind){Function.prototype.bind=function(G){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var E=Array.prototype.slice.call(arguments,1),D=this,H=function(){},F=function(){return D.apply(this instanceof H&&G?this:G,E.concat(Array.prototype.slice.call(arguments)))};H.prototype=this.prototype;F.prototype=new H();return F}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(E){var F=this.length>>>0;var D=Number(arguments[1])||0;D=(D<0)?Math.ceil(D):Math.floor(D);if(D<0){D+=F}for(;D<F;D++){if(D in this&&this[D]===E){return D}}return -1}}C.iUtils=A})(window);(function(A,C){var B=C(A);if(typeof define==="function"&&define.amd){define("UserGuidSynchronizer",function(){return B})}else{if(typeof exports==="object"){module.exports=B}else{A.UserGuidSynchronizer=B}}})(this,function(B){var C=B.Bitauto.iUtils,E=B.Bitauto.DomainManager,A=B.$,D;D=function(F){if(!(this instanceof D)){return new D(F)}if(F&&A.isFunction(F.initalize)){F.initalize.apply(this,F)}};D.defaultOption={sync:{protocol:"//",key:"UserGuid",syncPath:"/UserTraceCookie",domain:A.grep(["clientapi.yiche.com","clientapi.bitauto.com","clientapi.cheyisou.com"],function(F){return F.indexOf(E.getBaseDomain())<0})},cookie:{key:"userGuid"}};A.extend(D.prototype,{getUserGuidByCookie:function(F){F=A.extend(D.defaultOption.cookie,F);return C.Cookie.getCookie(F.key)},createSyncCookieUrl:function(F){return A.map(F.domain,function(G){return F.protocol+G+F.syncPath+"?"+A.param({key:F.key,val:F.val})})},syncUserGuidCookie:function(F){F=A.extend(D.defaultOption.sync,{val:this.getUserGuidByCookie()},F);if(F.val){var J=this.createSyncCookieUrl(F),I=J.length,G=A.Deferred();A.each(J,function(K,L){A.getScript(L).done(function(){I=I-1;G.notify({url:this.url,done:true});if(I===0){G.resolve()}}).fail(function(){I=I-1;G.notify({url:this.url,done:false})})});setTimeout(G.resolve,500);return G}else{var H=A.Deferred();H.reject();return H.promise()}}});D.instance=new D();return D});(function(B,C){B.Bitauto=Bitauto||{};var A=function(G,F,D,J){var H,K,I,E=D.length,L=0;J=C.type(J)==="number"?J:3000;C.each(D,function(O,N){var M=C.getScript(N).done(function(){L=L+1;G.notify({authUrl:this.url,success:true});if(L===E){G.resolve()}}).fail(function(){G.notify({authUrl:this.url,success:false})});if(N.indexOf(F)>-1){K=M.fail(G.reject)}});I=C.Deferred(function(M){H=setTimeout(M.resolve,J)}).promise();C.when(K,I).done(G.resolve);return G.always(function(){if(H>0){clearTimeout(H)}}).promise()};B.AuthLoader={load:function(D,F,E){return new A(C.Deferred(),D,F,E)}}})(Bitauto,$);var Bitauto=Bitauto||{};Bitauto.oAuthLogin=(function(){var A={Renren:0,Sina:1,Tencent:2,Kaixin:3,Taobao:4,Baidu:5,Weixin:6};var G=location.host.split("."),K=G[G.length-2]+"."+G[G.length-1],C="bitauto.com";var H={Sina:{width:600,heigth:700,requestUrl:function(L){return E(C,A.Sina,L)},openAgentLoginPage:D},Tencent:{width:600,heigth:700,requestUrl:function(L){return E(C,A.Tencent,L)},openAgentLoginPage:D},Kaixin:{width:600,heigth:500,requestUrl:function(L){return E(C,A.Kaixin,L)},openAgentLoginPage:D},Taobao:{width:600,heigth:700,requestUrl:function(L){return E(C,A.Taobao,L)},openAgentLoginPage:D},Baidu:{width:700,heigth:600,requestUrl:function(L){return E(C,A.Baidu,L)},openAgentLoginPage:D},Renren:{width:600,heigth:600,requestUrl:function(L){return E(C,A.Renren,L)},openAgentLoginPage:D},Weixin:{width:600,heigth:600,requestUrl:function(L){return E(K,A.Weixin,L)},openAgentLoginPage:D}};function E(N,M,L){return"//i."+N+"/UserIntergration/renren/Handler.ashx?source="+M+"&type="+L}function D(M,N,L){return"//i.bitauto.com/UserIntergration/Renren/TopLogin.aspx?key="+M+"&type="+L+"&returnurl="+(typeof(N)==="function"?N():N)}function I(){var M=top===window?window:top,L=M.location.href.indexOf("returnurl=");if(L>-1){return encodeURIComponent(M.location.href.substr(L+1))}else{return M.location.href}}function B(L){return L in H}function F(N,L){if(B(N)){var M=H[N];if(window.opener!=null){window.resizeTo(M.width,M.heigth)}$.get(M.requestUrl(L),{r:Math.random()},function(O){if(O!==""){location.href=O}},"text")}}function J(S,R,P,M){if(B(S)){if(R==undefined||R==""){R=""}var O=H[S],L=(top===window?window:top),N=true,Q=O.openAgentLoginPage(S,I,R);if(N){L.location.href=Q}else{L.open(Q,S,"width="+O.winWidth+", height="+O.winHeight+", toolbar =no, menubar=no, scrollbars=yes, resizable=no,location=no,status=no")}}}return{EnumUserIntergrationSource:A,openLoginPage:F,openAgentLoginPage:J,getReturnUrl:I,setGetReturnUrl:function(L){I=L}}})();(function(G,A){var E=A.Aside,B=A.Bitauto,C=A.DomainManager,F=A.Validator,D;D=function(H){this.option=G.extend(true,D.defaultOption(),H);this.createAside(this.option.asides);this.validator=this.createValidator(this.option.validatorOption);this.validator.createItems(this.option.validatorItemsOptions);this.validator.mobileApp=this;this.init()};D.prototype=G.extend(D.prototype,{init:function(){G.each([G("#txt_mobile"),G("#txt_imgCode"),G("#txt_mobileCode")],function(I,H){H.bind({blur:function(){G(this).removeClass("input_on");var J=G(this).val();if(!J||J==G(this).attr("placeholder")){G(this).removeClass("input_text")}else{G(this).addClass("input_text")}}})})},createAside:function(H){G.each(H,function(J,I){new E(I)})},createValidator:function(H){return new F(H)},createValidatorItems:function(I,H){I.createItems(H)}});D.defaultOption=function(){var H={imgCoder:null,loadAuthsTimeOut:5000,asides:G.map(["#txt_mobileCode"],function(I){return{tag:"<div></div>",forElement:G(I),attributes:{"class":"prompt"},opsition:function(){this.option.forElement.parent().append(this.asideElement)}}}),textConfig:{start:"正在注册...",error:"注册错误，请刷新页面重新注册",complete:"立即注册",autoLoginFail:"注册后自动登陆失败，请重新登陆"},cssConfig:{inputBorderRed:"input_border_red"},elements:{},validatorOption:{url:"/ajax/authenservice/MobileRegister.ashx",button:G("#btn_submit"),form:G("#form_submit"),parameters:{"registerSource":G("#hidden_registerSource").val(),"returnUrl":G("#hidden_returnUrl").val()},eventName:null,onStart:function(I){I.isDisable=true;I.button.val(I.mobileApp.option.textConfig.start)},onSuccess:function(I){if(!!I.result&&G.type(I.result.authUrls)==="array"){G.when(B.AuthLoader.load(C.getBaseDomain(),I.result.authUrls,I.mobileApp.option.loadAuthsTimeOut),UserGuidSynchronizer.instance.syncUserGuidCookie()).done(function(){I.isDisable=false;A.location.href="/Authenservice/RegisterSimple/MobileRegisterSuccess.html?returnurl="+encodeURIComponent(I.result.returnUrl)}).fail(function(){alert(I.mobileApp.option.textConfig.autoLoginFail);A.location.replace(A.location.href)})}},onFail:function(I){I.isDisable=false;I.button.val(I.mobileApp.option.textConfig.complete)},onItemFail:function(I){I.elements.addClass(I.validator.mobileApp.option.cssConfig.inputBorderRed);var J=I.elements.aside();J.set('<em class="wrong">'+I.getMsg()+"</em>");J.show()},onItemSuccess:function(I){I.elements.removeClass(I.validator.mobileApp.option.cssConfig.inputBorderRed);var J=I.elements.aside();J.set('<em class="correct">'+I.getMsg()+"</em>");J.show()},onEnd:function(I){},onError:function(){alert(this.mobileApp.option.textConfig.error);A.location.replace(A.location.href)}},validatorItemsOptions:{mobile:{name:"mobile",elements:G("#txt_mobile"),rules:{required:true,type:"mobile"},msgs:B.ValidMsgs.mobile},imgCode:{name:"imageCode",elements:G("#txt_imgCode"),parameters:function(){return{"imgCodeGuid":H.imgCoder.getGuid()}},rules:{required:true},msgs:B.ValidMsgs.imgCode,onFail:function(I){if(I.result.key!="required"){H.imgCoder.changeImg()}I.validator.onItemFail.call(I,I)}},mobileCode:{name:"mobileCode",eventName:"blur",elements:G("#txt_mobileCode"),parameters:function(){return{"mobile":G("#txt_mobile").val()}},rules:{required:true},msgs:B.ValidMsgs.mobileCode}}};return H};A.MobileApp=D})($,window);(function(E,A){var B=A.Bitauto,C=A.MobileApp,D;D=function(F){this.init(F)};D.prototype=E.extend(D.prototype,{init:function(F){this.option=E.extend(true,D.defaultOption(),F);this.imgCoder=this.createImgCoder(this.option.imgCoder);this.option.mobileCodeCreator.imgCoder=this.imgCoder;this.mobileCodeCreator=this.createMobileMsgCreator(this.option.mobileCodeCreator);this.option.mobileApp.imgCoder=this.imgCoder;this.mobileApp=this.createMobileApp(this.option.mobileApp)},createImgCoder:function(F){return new B.ImgCoder(F)},createMobileMsgCreator:function(F){return new B.MobileCodeCreator(F)},createMobileApp:function(F){return new C(F)}});D.defaultOption=function(){return{imgCoder:{imgSelector:"#codeImg",delegateChangeOption:[{eventName:"click",selector:'[act="ChangeImgCode"]'}]},mobileCodeCreator:{validatorItemOption:{mobile:{msgs:B.ValidMsgs.mobile,onFail:function(F){var G=["frequencyLimit","sendTimeLimit","sendVoiceTimeLimit","unNormalTime"];if(E.inArray(F.result.key,G)!=-1){F.elements=E("#txt_mobileCode")}F.validator.onItemFail.call(F,F);F.elements=E("#txt_mobile")}}}},mobileApp:{}}};A.MobilePageApp=D})($,window);